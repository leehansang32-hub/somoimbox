# 개발 일지 (Development Log)

## 2025-11-29: 초기 설정 및 인증/DB 구축

### 1. 프로젝트 개요
- **목표:** 소모임 앱 팩토리 (SaaS 모델)
- **비즈니스 모델:** 단일 DB에서 여러 모임(Community)을 관리하는 Multi-tenant 구조. 모임장에게 월 구독료 청구 예정.
- **기술 스택:** Next.js (App Router), Supabase (Auth, DB), Tailwind CSS

### 2. 주요 작업 내용

#### 인증 (Authentication)
- **Supabase Auth 연동:** `@supabase/ssr` 패키지를 사용하여 Next.js 미들웨어 및 서버 사이드 인증 구현.
- **소셜 로그인:** Google 로그인 연동 완료.
    - **GCP 설정:** OAuth 클라이언트 ID 발급, 리디렉션 URI 설정 (`/auth/v1/callback`).
    - **Supabase 설정:** Google Provider 활성화, Client ID/Secret 입력.
- **로그인 강제:** 미들웨어(`middleware.ts`)를 통해 비로그인 시 로그인 페이지로 리다이렉트 처리.
- **에러 처리:** 인증 콜백 오류 시 보여줄 에러 페이지(`auth-code-error`) 생성.
- **카카오 로그인:** 구현 완료.
    - **비즈니스 앱:** 사용자가 비즈니스 앱 설정을 완료하여 이메일 권한 획득 가능.
    - **구현:** 정상적인 OAuth 로그인 흐름으로 복구.
- **로그아웃:** 메인 페이지(`src/app/(main)/page.tsx`) 상단에 로그아웃 버튼 추가 및 기능 구현.

#### 데이터베이스 (Database)
- **스키마 설계:** `users`, `groups`, `group_members`, `events`, `chats`, `likes` 테이블 생성.
- **사용자 동기화:** `auth.users` (Supabase 관리) 테이블에 회원가입 시 `public.users` (앱 관리) 테이블로 데이터를 자동 복사하는 Trigger 구현.
- **보안:** RLS (Row Level Security) 정책 기본 설정 완료.

#### 버전 관리 (Version Control)
- **Git 초기화:** 프로젝트 로컬 저장소 초기화 (`git init`).
- **GitHub 연동:** 원격 저장소(`https://github.com/leehansang32-hub/somoimbox.git`) 연결.
- **초기 커밋:** MVP 기능(인증, DB 스키마, 기본 UI) 포함한 전체 코드 커밋 및 푸시 완료.

### 3. 수동 설정 기록 (Manual Configurations)
이 프로젝트를 다시 세팅하거나 배포할 때 필요한 수동 작업들입니다.

1.  **Supabase 프로젝트 생성**
2.  **Google Cloud Platform (GCP)**
    - OAuth 2.0 클라이언트 ID 생성 (웹 애플리케이션)
    - 승인된 리디렉션 URI: `https://[PROJECT_ID].supabase.co/auth/v1/callback`
3.  **Supabase Dashboard**
    - **Authentication > Providers > Google:** Enable, Client ID/Secret 입력.
    - **Authentication > URL Configuration:** Site URL 및 Redirect URLs 설정.
    - **SQL Editor:** `supabase/schema.sql` 파일 실행하여 테이블 및 트리거 생성.

### 4. 다음 단계
- 프론트엔드(UI)와 실제 DB 데이터 연결 (현재는 Mock 데이터 사용 중).
- 모임 생성, 가입, 채팅 기능 구현.
